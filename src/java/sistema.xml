<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- Configuration for the default package. -->
    <package name="sistema" extends="struts-default,jasperreports-default">
        <interceptors>
            <interceptor name="filtroSesion" class="filter.InterceptorSession"/>
            <interceptor-stack name="colaSesion">
                <interceptor-ref name="filtroSesion"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="colaSesion"/>
        
        <global-results>
            <result name="noLogin">/index.jsp</result>
        </global-results>
        
        <!--
        ACCIONES EXCLUSIVAS PARA USUARIOS LOGUEADOS
        -->
        
        <!--
        ACCION QUE REDIRECCIONA A LA CUENTA LOGUEADA
        (DEBE SER EL ACCION SUCCESS DE LAS ACCIONES QUE MODIFICIAN, ELIMINAN
        O AGREGAN INFORMACIÓN A LA BASE DE DATOS)
        -->
        <action name="miCuenta" class="control.ControlCartera" method="miCuenta">
            <result name="success">/JSP/usuario/function/MenuUsuario.jsp</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        
        <!--
        ACCIONES DE CARTERA
        -->
        <action name="modificarCartera" class="control.ControlCartera" method="modificarCartera">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="eliminarCartera" class="control.ControlCartera" method="eliminarCartera">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="crearCartera" class="control.ControlCartera" method="crearCartera">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="abonarCartera" class="control.ControlCartera" method="abonarCartera">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        
        <!--ACCIONES DE USUARIO-->
        <action name="modificarPerfil" class="control.ControlUsuario" method="modificarPerfil">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="cambiarImagenPerfil" class="control.ControlUsuario" method="cambiarImagenPerfil">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        
        
        
        
        <!--
        ACCIONES CREACION DE REPORTES
        -->
        <action name="reporteGastos" class="control.ControlReporte" method="reporteGastos">
            <result name="success" type="jasper">
                <param name="location">/report/Gastos.jasper</param>                
                <param name="reportParameters">params</param>
                <param name="connection">con</param>
                <param name="dataSource">gastos</param>
                <param name="format">PDF</param>
            </result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="reporteAbonos" class="control.ControlReporte" method="reporteAbonos">
            <result name="success" type="jasper">
                <param name="location">/report/Abonos.jasper</param>                
                <param name="reportParameters">params</param>
                <param name="connection">con</param>
                <param name="dataSource">abonos</param>
                <param name="format">PDF</param>
            </result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <action name="reporteTransacciones" class="control.ControlReporte" method="reporteTransacciones">
            <result name="success" type="jasper">
                <param name="location">/report/Transacciones.jasper</param>                
                <param name="reportParameters">params</param>
                <param name="connection">con</param>
                <param name="dataSource">transacciones</param>
                <param name="format">PDF</param>
            </result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
    
        
        
        
        <!--ACCIONES DE TRANSFERENCIA-->
        
        <action name="registrarTransaccion" class="control.ControlTransaccion" method="registrarTransaccion">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <!--ACCIONES DE GASTOS-->
        <action name="registrarGasto" class="control.ControlGasto" method="registrarGasto">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        <action name="eliminarGasto" class="control.ControlGasto" method="eliminarGasto">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        
        <!--ACCIONES PARA CATEGORÍAS-->
        <action name="registrarCategoria" class="control.ControlCategoria" method="registrarCategoria">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        <action name="eliminarCategoria" class="control.ControlCategoria" method="eliminarCategoria">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action>
        <action name="modificarCategoria" class="control.ControlCategoria" method="modificarCategoria">
            <result name="success" type="redirect">miCuenta</result>
            <result name="error">/JSP/error/error.jsp</result>
        </action> 
        
        
        
    </package>
</struts>
